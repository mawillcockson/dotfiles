(defsrc
  ;; https://github.com/jtroo/kanata/blob/main/parser/src/keys/mod.rs#L159
  esc    F1   F2   F3   F4        F5   F6   F7   F8   F9  F10 F11  F12
  grv  1    2    3    4    5    6    7    8    9    0    -    =    bspc
  tab  q    w    e    r    t    y    u    i    o    p    [    ]    \
  caps a    s    d    f    g    h    j    k    l    ;    '    ret
  lsft z    x    c    v    b    n    m    ,    .    /    rsft
  lctl lmet lalt           spc            ralt rmet cmp rctl
)

#| empty
  _      _    _    _    _         _    _    _    _    _   _   _    _
  _    _    _    _    _    _    _    _    _    _    _    _    _    _
  _    _    _    _    _    _    _    _    _    _    _    _    _    _
  _    _    _    _    _    _    _    _    _    _    _    _    _
  _    _    _    _    _    _    _    _    _    _    _    _
  _    _    _              _              _    _    _   _
|#

(defcfg
  process-unmapped-keys no
)

(defvar
  tap-timeout 200
  hold-timeout 200
  tt $tap-timeout
  ht $hold-timeout
)

(defalias
  norm (tap-dance $tt (F1 (layer-switch normal)))
  moj (tap-dance $tt (F2 (layer-switch emoji)))
  clk (tap-dance $tt (F3 (layer-switch click)))
  capl (tap-hold $tt $ht esc lctrl)
;; live reload configuration by pressing and holding the original right-ctrl, and then pressing the original left-ctrl
  rld (fork CapsLock lrld (rctrl))
  â‡ˆ (tap-hold $tt $ht f (layer-while-held arrows))
  ðŸ“ƒâ‡ˆ (tap-hold $tt $ht e (layer-while-held cluster))
  ðŸ‘‰ (tap-hold $tt $ht n (layer-while-held right-hold))
  ðŸ–±ï¸ (tap-hold $tt $ht 0 (layer-while-held mousebtns))
  sw (fork w ShiftLeft (e f CapsLock))
)

#|
(deflayer start
  F1 (tap-dance $tt (F1 (layer-switch normal)))
  F2 (tap-dance $tt (F2 (layer-switch emoji)))
  F3 (tap-dance $tt (F3 (layer-switch click)))
  caps (tap-hold $tt $ht esc lctrl)
;; live reload configuration by pressing and holding the original right-ctrl, and then pressing the original left-ctrl
  lctrl (fork CapsLock lrld (rctrl))
  f (tap-hold $tt $ht f (layer-while-held arrows))
  w (fork w ShiftLeft (CapsLock e f))
  e (tap-hold $tt $ht e (layer-while-held cluster))
  n (tap-hold $tt $ht n (layer-while-held right-hold))
  0 (tap-hold $tt $ht 0 (layer-while-held mousebtns))
)
|#

(deflayer start
   _   @norm @moj @clk  _         _    _    _    _    _   _   _    _
   _   _    _    _    _    _    _    _    _    _    @ðŸ–±ï¸   _    _    _
   _   _    @sw  @ðŸ“ƒâ‡ˆ _    _    _    _    _    _    _    _    _    _
 @capl _    _    _    @â‡ˆ   _    _    _    _    _    _    _     _
   _   _    _    _    _    _    @ðŸ‘‰  _    _    _    _     _
  @rld  _    _              _              _    _    _   _
)

(defalias
  numpd (layer-while-held numpad)
)

(deflayer arrows
  _      _    _    _    _         _    _    _    _    _   _   _    _
  _    _    _    _    _    _    _    _    _    _    _    _    _    _
  _    _   â€¹â‡§  @numpd _    _    _    _    _    _    _    _    _    _
  _    _    _    _    _    _    â—€    â–¼    â–²    â–¶    _    _    _
  _    _    _    _    _    _    _    _    _    _    _    _
  _    _    _              _              _    _    _   _
)

#|
(deflayermap (arrows)
  h left
  j down
  k up
  l right
  e (layer-while-held numpad)
  w â€¹â‡§
)
|#

(deflayer cluster
  _      _    _    _    _         _    _    _    _    _   _   _    _
  _    _    _    _    _    _    _    _    _    _    _    _    _    _
  _    _    â€¹â‡§   _    _    _    _    _    _    bspc del  _    _    _
  _    _    _    _    _    _    Home pgdn pgup End  _    _    _
  _    _    _    _    _    _    _    _    _    _    _    _
  _    _    _              _              _    _    _   _
)

#|
(deflayermap (cluster)
  h Home
  l End
  j PageDown
  k PageUp
  o Backspace
  p Delete
  w ShiftLeft
)
|#

(deflayer numpad
  _      _    _    _    _         _    _    _    _    _   _   _    _
  _    _    _    _    _    _    _    7    8    9    -    -    _    _
  _    _    _    _    _    _    _    4    5    6    _    _    _    _
  _    _    _    _    _    _    _    1    2    3    _    _    _
  _    _    _    _    _    _    _    0    0    .    _    _
  _    _    _              _              _    _    _   _
)

#|
(deflayermap (numpad)
  7 7
  8 8
  9 9
  0 -
  - -
  u 4
  i 5
  o 6
  j 1
  k 2
  l 3
  m 0
  , 0
  . .
)
|#

(deflayer mousebtns
  _      _    _    _    _         _    _    _    _    _   _   _    _
  _    _    _    _    _    _    _    _    _    comp _    _    _    _
  _    _    _    _    _    _    _    _    _    ðŸ–°3   _    _    _    _
  _    _    _    _    _    _    _    _    _    _    _    _    _
  _    _    _    _    _    _    _    _    _    _    _    _
  _    _    _              _              _    _    _   _
)

#|
(deflayermap (mousebtns)
  9 ContextMenu
  o mousemid
)
|#

(deflayer right-hold
  _      _    _    _    _         _    _    _    _    _   _   _    _
  _    _    _    _    _    _    _    _    _    _    _    _    _    _
  _    _    _    _    _    _    _    _    _    _    _    _    _    _
  _    _    _    _    _    _    _    â‡§â€º   â†©    _    _    _    _
  _    _    _    _    _    _    _    _    _    _    _    _
  _    _    _              _              _    _    _   _
)

#|
(deflayermap (right-hold)
  j RightShift
  k Enter
)
|#

(defalias
  strt (tap-dance $tt (F1 (layer-switch start)))
)

(deflayer normal
  _     @strt _    _    _         _    _    _    _    _   _   _    _
  _    _    _    _    _    _    _    _    _    _    _    _    _    _
  _    _    _    _    _    _    _    _    _    _    _    _    _    _
  _    _    _    _    _    _    _    _    _    _    _    _    _
  _    _    _    _    _    _    _    _    _    _    _    _
  _    _    _              _              _    _    _   _
)

#|
(deflayermap (normal)
  F1 @strt
)
|#

(defalias
  strn (tap-dance $tt (XX (layer-switch start)))
  ;; NOTE::IMPROVEMENT It could instead be a key_up of MouseLeft, followed by
  ;; pressing MouseLeft again. Or it could be mapped to a press+release instead of
  ;; letting it be held.
  !ðŸ–±ï¸ â€¹ðŸ–°
)

(deflayer click
  @!ðŸ–±ï¸  @!ðŸ–±ï¸  @!ðŸ–±ï¸ @strn @!ðŸ–±ï¸      @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸
  @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸
  @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸
  @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸
  @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸
  @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸           @!ðŸ–±ï¸           @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸ @!ðŸ–±ï¸
)

(defalias
  variation-selector-16 (unicode ï¸)
  zero-width-joiner (unicode â€)
)

(defalias
  vs16 @variation-selector-16
  fp1-2 (unicode ðŸ»)
  fp3 (unicode ðŸ¼)
  fp4 (unicode ðŸ½)
  fp5 (unicode ðŸ¾)
  fp6 (unicode ðŸ¿)
  waving-white-flag (unicode ðŸ³)
  rainbow (unicode ðŸŒˆ)
  zwj @zero-width-joiner
)

(defalias
  exclamation (unicode â—)
  double-exclamation (macro (unicode â€¼) @vs16)
  double-question (unicode â‡)
  exclamation-question (macro (unicode â‰) @vs16)
  en-dash (unicode â€“)
  em-dash (unicode â€”)
  2-em-dash (unicode â¸º)
  3-em-dash (unicode â¸»)
  open-double-quote (unicode â€œ)
  close-double-quote (unicode â€)
  open-single-quote (unicode â€˜)
  close-single-quote (unicode â€™)
  middot (unicode Â·)
  swung-dash (unicode â“)
  save-dash (unicode ã€œ)
  almost-equal (unicode â‰ˆ)
  approximately-equal (unicode â‰…)
  degree (unicode Â°)
  celsius (unicode â„ƒ)
  fahrenheit (unicode â„‰)

  smile (unicode ðŸ˜„)
  smile2 (macro (unicode â˜º) @vs16)
  happy (unicode ðŸ˜Š)

  grin (unicode ðŸ˜)
  smile-sweatdrop (unicode ðŸ˜…)
  lol (unicode ðŸ˜‚)
  upside-down-face (unicode ðŸ™ƒ)
  melting (unicode ðŸ« )
  wink (unicode ðŸ˜‰)
  love-received (unicode ðŸ¥°)
  heart-eyes (unicode ðŸ˜)
  star-eyes (unicode ðŸ¤©)
  blow-kiss (unicode ðŸ˜˜)
  delicious (unicode ðŸ˜‹)
  tongue-out (unicode ðŸ˜›)
  tongue-out-wink (unicode ðŸ˜œ)
  hugging-face (unicode ðŸ¤—)
  covering-laugh (unicode ðŸ¤­)
  peek (unicode ðŸ«£)
  hush (unicode ðŸ¤«)
  think (unicode ðŸ¤”)
  zipper-face (unicode ðŸ¤)
  eyebrow (unicode ðŸ¤¨)
  flat-face (unicode ðŸ˜‘)
  grimace (unicode ðŸ˜¬)
  smirk (unicode ðŸ˜)
  side-eye (unicode ðŸ˜’)
  eye-roll (unicode ðŸ™„)
  exhale (macro (unicode ðŸ˜®) @zero-width-joiner (unicode ðŸ’¨))
  pleased (unicode ðŸ˜Œ)
  sad (unicode ðŸ˜”)
  drool (unicode ðŸ¤¤)
  injured (unicode ðŸ¤•)
  nose-blow (unicode ðŸ¤§)
  hot (unicode ðŸ¥µ)
  freeze (unicode ðŸ¥¶)
  head-explosion (unicode ðŸ¤¯)
  party-face (unicode ðŸ¥³)
  monocle (unicode ðŸ§)
  diagonal-mouth (unicode ðŸ«¤)
  worried (unicode ðŸ˜Ÿ)
  slight-frown (unicode ðŸ™)
  big-frown (macro (unicode â˜¹) @vs16)
  oh-face (unicode ðŸ˜®)
  interested (unicode ðŸ˜¯)
  wow-face (unicode ðŸ˜²)
  blush (unicode ðŸ˜³)
  plead (unicode ðŸ¥º)
  happy-cry (unicode ðŸ¥¹)
  concerned (unicode ðŸ˜§)
  fearful (unicode ðŸ˜¨)
  worried-sweat (unicode ðŸ˜¥)
  >~< (unicode ðŸ˜–)
  the-scream (unicode ðŸ˜±)
  bawling (unicode ðŸ˜­)
  sorry (unicode ðŸ˜£)
  very-sad (unicode ðŸ˜ž)
  downcast-with-sweat (unicode ðŸ˜“)
  yawn (unicode ðŸ¥±)
  harumph (unicode ðŸ˜¤)
  devil (unicode ðŸ˜ˆ)
  skull (unicode ðŸ’€)

  hand-wave (unicode ðŸ‘‹)
  ok-hand (unicode ðŸ‘Œ)
  fingers-crossed (unicode ðŸ¤ž)
  point-left (unicode ðŸ‘ˆ)
  point-right (unicode ðŸ‘‰)
  thumbs-up (unicode ðŸ‘)
  solidarity (unicode âœŠ)
  highfive (unicode ðŸ™Œ)
  eyes (unicode ðŸ‘€)
  eye (unicode ðŸ‘)
  tongue (unicode ðŸ‘…)
  mouth (unicode ðŸ‘„)
  lip-bite (unicode ðŸ«¦)

  person-no (unicode ðŸ™…)
  person-hand (unicode ðŸ’)
  bow (unicode ðŸ™‡)
  facepalm (unicode ðŸ¤¦)
  shrug (unicode ðŸ¤·)
  walking (unicode ðŸš¶)
  standing (unicode ðŸ§)
  running (unicode ðŸƒ)
  hug (unicode ðŸ«‚)

  heart-hands (macro (unicode ðŸ«¶) @fp1-2)
  heart (macro (unicode â¤) @vs16)
  sparkling-heart (unicode ðŸ’–)
  heart-with-ribbon (unicode ðŸ’)

  sloth (unicode ðŸ¦¥)
  butterfly (unicode ðŸ¦‹)
  flowers (unicode ðŸ’)
  four-leaf-clover (unicode ðŸ€)
  leaves (unicode ðŸƒ)
  banana (unicode ðŸŒ)
  peach (unicode ðŸ‘)
  eggplant (unicode ðŸ†)
  taxi (unicode ðŸš•)
  car (unicode ðŸš—)
  hourglass (unicode âŒ›)
  milky-way (unicode ðŸŒŒ)
  thundercloud-with-rain (macro (unicode â›ˆ) @vs16)
  umbrella-with-rain (unicode â˜”)
  lightning (unicode âš¡)
  sparkles (unicode âœ¨)
  party (unicode ðŸŽ‰)
  confetti (unicode ðŸŽŠ)
  ping-pong (unicode ðŸ“)
  spade-suit (macro (unicode â™ ) @vs16)
  yarn (unicode ðŸ§¶)
  knot (unicode ðŸª¢)
  mute (unicode ðŸ”‡)
  loud (unicode ðŸ”Š)
  loudspeaker (unicode ðŸ“¢)
  megaphone (unicode ðŸ“£)
  bullhorn-with-sound-waves (unicode ðŸ•¬)
  battery-low (unicode ðŸª«)
  computer (macro (unicode ðŸ–¥) @vs16)
  clapper-board (unicode ðŸŽ¬)
  bookmark (unicode ðŸ”–)
  flying-money (unicode ðŸ’¸)
  calendar (unicode ðŸ“…)
  warning-sign (macro (unicode âš ) @vs16)
  do-not-enter (unicode â›”)
  blocked (unicode ðŸš«)
  trans-symbol (macro (unicode âš§) @vs16)
  infinity (macro (unicode â™¾) @vs16)

  left-arrow (unicode â†)
  left-pair-arrow (unicode â‡‡)
  left-double-arrow (unicode â‡)
  left-dashed-arrow (unicode â‡ )
  left-white-arrow (unicode â‡¦)
  left-black-arrow (unicode â¬…)
  left-black-triangle (unicode ðŸž€)
  left-fingerpost-arrow (unicode ðŸ ´)
  left-heavy-arrow (unicode ðŸ¡„)
  left-sansserif-arrow (unicode ðŸ¡)
  left-giant-arrow (unicode ðŸ¢€)
  left-arrow-emoji (macro @left-black-arrow @vs16)

  up-arrow (unicode â†‘)
  up-pair-arrow (unicode â‡ˆ)
  up-double-arrow (unicode â‡‘)
  up-dashed-arrow (unicode â‡¡)
  up-white-arrow (unicode â‡§)
  up-black-arrow (unicode â¬†)
  up-black-triangle (unicode ðŸž)
  up-fingerpost-arrow (unicode ðŸ µ)
  up-heavy-arrow (unicode ðŸ¡…)
  up-sansserif-arrow (unicode ðŸ¡‘)
  up-giant-arrow (unicode ðŸ¢)
  up-arrow-emoji (macro @up-black-arrow @vs16)

  right-arrow (unicode â†’)
  right-pair-arrow (unicode â‡‰)
  right-double-arrow (unicode â‡’)
  right-dashed-arrow (unicode â‡¢)
  right-white-arrow (unicode â‡¨)
  right-black-arrow (unicode âž¡)
  right-black-triangle (unicode ðŸž‚)
  right-fingerpost-arrow (unicode ðŸ ¶)
  right-heavy-arrow (unicode ðŸ¡†)
  right-sansserif-arrow (unicode ðŸ¡’)
  right-giant-arrow (unicode ðŸ¢‚)
  right-arrow-emoji (macro @right-black-arrow @vs16)

  down-arrow (unicode â†“)
  down-pair-arrow (unicode â‡Š)
  down-double-arrow (unicode â‡“)
  down-dashed-arrow (unicode â‡£)
  down-white-arrow (unicode â‡©)
  down-black-arrow (unicode â¬‡)
  down-black-triangle (unicode ðŸžƒ)
  down-fingerpost-arrow (unicode ðŸ ·)
  down-heavy-arrow (unicode ðŸ¡‡)
  down-sansserif-arrow (unicode ðŸ¡“)
  down-giant-arrow (unicode ðŸ¢ƒ)
  down-arrow-emoji (macro @down-black-arrow @vs16)

  long-left-arrow (unicode âŸµ)
  long-right-arrow (unicode âŸ¶)

  long-double-left-arrow (unicode âŸ¸)
  long-double-right-arrow (unicode âŸ¹)

  back-arrow-emoji (unicode ðŸ”™)
  end-arrow-emoji (unicode ðŸ”š)
  soon-arrow-emoji (unicode ðŸ”œ)
  top-arrow-emoji (unicode ðŸ”)

  free-of-charge (unicode ðŸˆš)
  pride-flag (macro @waving-white-flag @vs16 @zwj @rainbow)
  trans-flag (macro @waving-white-flag @vs16 @zwj (unicode âš§) @vs16)

  music-notes (unicode ðŸŽ¶)
  nice-house (unicode ðŸ¡)
  sweat (unicode ðŸ’¦)
  no-18 (unicode ðŸ”ž)
  fire (unicode ðŸ”¥)
  clock (unicode ðŸ•“)
  lightning-mood (unicode ðŸ—²)
  checkbox-check (unicode â˜‘)
  checkbox-empty (unicode â˜)
  checkbox-crossed (unicode â˜’)
  hammer-and-sickle (unicode â˜­)
  lane-merge (unicode â›™)
  inverted-pentagram (unicode â›§)
  penis (unicode ð“‚º)
  penis-with-emission (unicode ð“‚¸)
)

(deflayermap (emoji)
  F2 (tap-dance $tt (F2 (layer-switch start)))
  ShiftLeft (layer-while-held shift-emoji)
  ShiftRight (layer-while-held shift-emoji)
  Backquote nop0
  1 nop0
  2 nop0
  3 nop0
  4 nop0
  5 nop0
  6 nop0
  7 nop0
  8 nop0
  9 nop0
  0 (tap-dance $tt (@degree @celsius @fahrenheit))
  Minus (tap-dance $tt (@en-dash @em-dash @2-em-dash @3-em-dash))
  Equal nop0
  Backspace Backspace
  Tab nop0
  q @smile
  w @happy
  e @grin
  r @smile-sweatdrop
  t @lol
  y @upside-down-face
  u @melting
  i @wink
  o @covering-laugh
  p @heart-eyes
  BracketLeft @star-eyes
  BracketRight @blow-kiss
  Backslash @delicious
  CapsLock @tongue-out
  a @tongue-out-wink
  s @peek
  d @hush
  f (layer-while-held vim-directions-arrows)
  g @zipper-face
  h (tap-dance 200 (@heart @heart-hands))
  j @blow-kiss
  k @love-received
  l @hugging-face
  Semicolon nop0
  Quote (tap-dance $tt ((unicode â€˜) (unicode â€™)))
  Enter Enter
  z nop0
  x nop0
  c nop0
  v nop0
  b nop0
  n nop0
  m nop0
  Comma nop0
  Period @middot
  Slash nop0
  Space @zwj
)

(deflayermap (shift-emoji)
  1 (tap-dance $tt ((unicode â—) (unicode â€¼)))
  Quote (tap-dance $tt ((unicode â€œ) (unicode â€)))
  p (tap-dance $tt (@penis @penis-with-emission))
)

(deflayermap (vim-directions-arrows)
  w (layer-while-held vim-direction-arrows-alt)
  h (tap-dance $tt (@left-arrow @left-arrow-emoji @left-heavy-arrow @left-giant-arrow))
  k (tap-dance $tt (@up-arrow @up-arrow-emoji @up-heavy-arrow @up-giant-arrow))
  l (tap-dance $tt (@right-arrow @right-arrow-emoji @right-heavy-arrow @right-giant-arrow))
  j (tap-dance $tt (@down-arrow @down-arrow-emoji @down-heavy-arrow @down-giant-arrow))
)

(deflayermap (vim-direction-arrows-alt)
  h (tap-dance $tt (@long-left-arrow @long-double-left-arrow @back-arrow-emoji @end-arrow-emoji))
  k (tap-dance $tt (@top-arrow-emoji nop0))
  l (tap-dance $tt (@long-right-arrow @long-double-right-arrow @soon-arrow-emoji))
  j (tap-dance $tt (nop0 nop1))
)
