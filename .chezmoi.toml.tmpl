progress = true
{{ $destDir := .chezmoi.homeDir }}
destDir = {{ $destDir | toToml }}
sourceDir = {{ joinPath .chezmoi.homeDir "projects" "dotfiles" | toToml }}

[env]
{{ $defaultConfigHome := joinPath $destDir ".config" }}
{{ if env "XDG_CONFIG_HOME" }}
XDG_CONFIG_HOME = {{ env "XDG_CONFIG_HOME" | toToml }}
{{ else }}
XDG_CONFIG_HOME = {{ promptStringOnce . "XDG_CONFIG_HOME" (printf "$XDG_CONFIG_HOME (must be in %s)" $destDir) $defaultConfigHome | toToml }}
{{ end }}
{{ $bootstrapDir := joinPath .chezmoi.config.tempDir "chezmoi-bootstrap" }}
{{ if .chezmoi.os | eq "windows" }}
PATH = {{ list (env "PATH") $bootstrapDir | join ";" | toToml }}
{{ else }}
PATH = {{ list (env "PATH") $bootstrapDir | join ":" | toToml }}
{{ end }}

[gitHub]
refreshPeriod = '1h'

[data]
github_username = 'mawillcockson'
git_name = 'Matthew W'
git_email = 'matthew@willcockson.family'
git_signingKey = 'EDCA9AF7D273FA643F1CE76EA5A7E106D69D1115'
minimum_nu_version = { major = 0, minor = 95, patch = 0 }
set_XDG_CONFIG_HOME = {{ promptBoolOnce . "set_XDG_CONFIG_HOME" "Would you like to set $XDG_CONFIG_HOME system-wide (y/n)" false | toToml }}
{{ $install_nushell := promptBoolOnce . "install_nushell" "Would you like to (try to) install Nushell (y/n)" false }}
install_nushell = {{ $install_nushell | toToml }}
{{ if $install_nushell }}
run_setup = {{ promptBoolOnce . "run_setup" "Would you like to run the system-wide setup (y/n)" true | toToml }}
{{ else }}
run_setup = false
{{ end }}
bootstrapDir = {{ $bootstrapDir | toToml }}
{{ if .chezmoi.os | eq "windows" }}
bootstrap_nu = {{ joinPath $bootstrapDir "nu.exe" | toToml }}
bootstrap_eget = {{ joinPath $bootstrapDir "eget.exe" | toToml }}
{{ else }}
bootstrap_nu = {{ joinPath $bootstrapDir "nu" | toToml }}
bootstrap_eget = {{ joinPath $bootstrapDir "eget" | toToml }}
{{ end }}
